<!DOCTYPE html>
<html lang="en">
<head>
  <title>Framed Page</title>
  <script src="//cdn.jsdelivr.net/g/jquery@1.11.0"></script>
  <script src="//cdn.jsdelivr.net/jquery.cookie/1.4.0/jquery.cookie.min.js"></script>
</head>
<body style="background-color: lightcoral;">
<h2>This is the framed site</h2>
<i>(http://vit-demos.appspot.com/framed.html)</i>
<h3>Where are my cookies?</h3>

<script>
  var hasCookie = false;
  $.cookie('the_cookie', 'the_value',  { expires: 365, path: '/' }); // 1 year
  if ($.cookie('the_cookie'))
    hasCookie = true
window.parent.postMessage(hasCookie, "http://localhost:3001");
  console.log('eo me iframe')
  function receiveMessage(event)
{
  console.log('eo me iframe',event.origin,event.source,event)
  // Do we trust the sender of this message?  (might be
  // different from what we originally opened, for example).
  if (event.origin !== "http://localhost:3001")
    return;

  // event.source is popup
  // event.data is "hi there yourself!  the secret response is: rheeeeet!"
}
window.addEventListener("message", receiveMessage, false);
</script>
</body>
</html>
