<!DOCTYPE html>
<html lang="en">
<head>
  <title>Framed Page</title>
  <script src="//cdn.jsdelivr.net/g/jquery@1.11.0"></script>
  <script src="//cdn.jsdelivr.net/jquery.cookie/1.4.0/jquery.cookie.min.js"></script>
</head>
<body style="background-color: lightcoral;">
<h2>This is the framed site</h2>
<i>(http://vit-demos.appspot.com/framed.html)</i>
<h3>Where are my cookies?</h3>

<script>
  function receiveMessage(event)
    {
        // Do we trust the sender of this message?
        if (event.origin !== "http://localhost:3001")
            return;

        // event.source is window.opener
        // event.data is "hello there!"

        // Assuming you've verified the origin of the received message (which
        // you must do in any case), a convenient idiom for replying to a
        // message is to call postMessage on event.source and provide
        // event.origin as the targetOrigin.
        event.source.postMessage("hi there yourself!  the secret response " +
            "is: rheeeeet!",
            event.origin);
    }

window.addEventListener("message", receiveMessage, false);
  $.cookie('the_cookie', 'the_value',  { expires: 365, path: '/' }); // 1 year
  if ($.cookie('the_cookie'))
    alert("You've got cookies :)");
  else
    alert('Too bad :( No cookies for framed sites :(');
</script>
</body>
</html>
