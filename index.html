<!DOCTYPE html>
<html lang="en">
<head>
  <title>Framed Page</title>
  <script src="//cdn.jsdelivr.net/g/jquery@1.11.0"></script>
  <script src="//cdn.jsdelivr.net/jquery.cookie/1.4.0/jquery.cookie.min.js"></script>
</head>
<body style="background-color: lightcoral;">
<h2>This is the framed site</h2>
<i>(http://vit-demos.appspot.com/framed.html)</i>
<h3>Where are my cookies?</h3>

<script>
  var popup = window.open(/* popup details */);

// When the popup has fully loaded, if not blocked by a popup blocker:

// This does nothing, assuming the window hasn't changed its location.
popup.postMessage("The user is 'bob' and the password is 'secret'",
                  "https://secure.example.net");

// This will successfully queue a message to be sent to the popup, assuming
// the window hasn't changed its location.
popup.postMessage("hello there!", "http://example.com");

function receiveMessage(event)
{
  // Do we trust the sender of this message?  (might be
  // different from what we originally opened, for example).
  console.log('aaaaa2');
  if (event.origin !== "http://example.com")
    return;

  // event.source is popup
  // event.data is "hi there yourself!  the secret response is: rheeeeet!"
}
window.addEventListener("message", receiveMessage, false);
  $.cookie('the_cookie', 'the_value',  { expires: 365, path: '/' }); // 1 year
  if ($.cookie('the_cookie'))
    alert("You've got cookies :)");
  else
    alert('Too bad :( No cookies for framed sites :(');
</script>
</body>
</html>
